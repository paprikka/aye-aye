{"version":3,"file":"content.js","sources":["../src/content.ts"],"sourcesContent":["import styles from \"./content.module.css\";\n\n(async () => {\n  const make = () => {\n    const closeButtonElement = document.createElement(\"button\");\n    closeButtonElement.classList.add(styles.closeButton);\n    closeButtonElement.textContent = \"Close\";\n    closeButtonElement.onclick = () => api.dispose();\n\n    const frame = document.createElement(\"iframe\");\n    frame.classList.add(styles.frame);\n    frame.src = chrome.runtime.getURL(\"preview.html\");\n\n    const dialogElement = document.createElement(\"dialog\");\n    dialogElement.classList.add(styles.dialog);\n\n    dialogElement.appendChild(frame);\n    dialogElement.appendChild(closeButtonElement);\n    document.body.appendChild(dialogElement);\n\n    const api = {\n      show: () => {\n        window.addEventListener(\n          \"message\",\n          (event) => {\n            console.log({ event });\n            if (event.data === \"ayeaye::ready\") {\n              const html = document.querySelector(\"body\")!.innerHTML;\n              frame.contentWindow!.postMessage(html, \"*\");\n            }\n          },\n          {\n            once: true,\n          }\n        );\n        dialogElement.showModal();\n      },\n      hide: () => {\n        dialogElement.close();\n      },\n      dispose: () => {\n        api.hide();\n        dialogElement.remove();\n      },\n    };\n\n    return api;\n  };\n\n  if (\"ayeaye\" in window) {\n    (window as any).ayeaye.dispose();\n  }\n\n  (window as any).ayeaye = make();\n  (window as any).ayeaye.show();\n})();\n"],"names":["make","closeButtonElement","document","createElement","classList","add","styles","closeButton","textContent","onclick","api","dispose","frame","src","chrome","runtime","getURL","dialogElement","dialog","appendChild","body","show","addEventListener","event","console","log","data","html","querySelector","innerHTML","contentWindow","postMessage","once","showModal","hide","close","remove","window","ayeaye"],"mappings":"4GAEC,SAAY,CACX,MAAMA,EAAOA,IAAM,CACXC,MAAAA,EAAqBC,SAASC,cAAc,QAAQ,EACvCC,EAAAA,UAAUC,IAAIC,EAAOC,WAAW,EACnDN,EAAmBO,YAAc,QACdC,EAAAA,QAAU,IAAMC,EAAIC,QAAQ,EAEzCC,MAAAA,EAAQV,SAASC,cAAc,QAAQ,EACvCC,EAAAA,UAAUC,IAAIC,EAAOM,KAAK,EAChCA,EAAMC,IAAMC,OAAOC,QAAQC,OAAO,cAAc,EAE1CC,MAAAA,EAAgBf,SAASC,cAAc,QAAQ,EACvCC,EAAAA,UAAUC,IAAIC,EAAOY,MAAM,EAEzCD,EAAcE,YAAYP,CAAK,EAC/BK,EAAcE,YAAYlB,CAAkB,EACnCmB,SAAAA,KAAKD,YAAYF,CAAa,EAEvC,MAAMP,EAAM,CACVW,KAAMA,IAAM,CACHC,OAAAA,iBACL,UACWC,GAAA,CAELA,GADJC,QAAQC,IAAI,CAAEF,MAAAA,CAAAA,CAAO,EACjBA,EAAMG,OAAS,gBAAiB,CAClC,MAAMC,EAAOzB,SAAS0B,cAAc,MAAM,EAAGC,UACvCC,EAAAA,cAAeC,YAAYJ,EAAM,GAAG,EAC5C,EAEF,CACEK,KAAM,EAAA,CAEV,EACAf,EAAcgB,UAAU,CAC1B,EACAC,KAAMA,IAAM,CACVjB,EAAckB,MAAM,CACtB,EACAxB,QAASA,IAAM,CACbD,EAAIwB,KAAK,EACTjB,EAAcmB,OAAO,CACvB,CAAA,EAGK1B,OAAAA,CAAAA,EAGL,WAAY2B,QACbA,OAAeC,OAAO3B,UAGxB0B,OAAeC,OAAStC,IACxBqC,OAAeC,OAAOjB,MACzB,GAAG"}